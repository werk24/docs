
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<meta content="Werk24 Client and API documentation" name="description"/>
<meta content="Dr. Jochen Mattes" name="author"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en, de" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="../../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1, mkdocs-material-4.6.3" name="generator"/>
<title>TechreadClient - Werk24</title>
<link href="../../assets/stylesheets/application.adb8469c.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/application-palette.a8b3c06d.css" rel="stylesheet"/>
<meta content="" name="theme-color"/>
<script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
<link href="../../assets/fonts/material-icons.css" rel="stylesheet"/>
<link href="../../extra.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="pink" data-md-color-primary="black" dir="ltr">
<svg class="md-svg">
<defs>
<svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg"><path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z" fill="currentColor"></path></svg>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a class="md-skip" href="#techreadclient" tabindex="0">
        Skip to content
      </a>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a aria-label="Werk24" class="md-header-nav__button md-logo" href="../.." title="Werk24">
<i class="md-icon"></i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
              Werk24
            </span>
<span class="md-header-nav__topic">
              
                TechreadClient
              
            </span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-icon md-search__icon" for="__search"></label>
<button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
        
      </button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
            Type to start searching
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/werk24/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    werk24
  </div>
</a>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container">
<main class="md-main" role="main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="../.." title="Werk24">
<i class="md-icon"></i>
</a>
    Werk24
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/werk24/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    werk24
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      HOIME
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-1">
        HOIME
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Welcome">
      Welcome
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/quickstart/" title="Getting Started">
      Getting Started
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/authentication/" title="Authentication">
      Authentication
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      CLI
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-2">
        CLI
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/basic/" title="Basic">
      Basic
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/techread/" title="Techread">
      Techread
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      API
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-3">
        API
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../basics/" title="Getting Started">
      Getting Started
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        TechreadClient
      </label>
<a class="md-nav__link md-nav__link--active" href="./" title="TechreadClient">
      TechreadClient
    </a>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#initiating-the-client">
    Initiating the Client
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-ask-concept">
    The Ask Concept
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#defining-hooks">
    Defining Hooks
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#submitting-a-request">
    Submitting a Request
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-example">
    Full Example
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#further-pointers">
    Further Pointers
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#authentication-client">
    Authentication Client
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techread-https-client">
    Techread HTTPS Client
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techread-wss-client">
    Techread WSS Client
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Asks
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-4">
        Asks
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../asks/basics/" title="Basics">
      Basics
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../asks/page/" title="Pages and Sheets">
      Pages and Sheets
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../asks/sectional/" title="Sectionals">
      Sectionals
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../asks/variant/" title="Variants and Measures">
      Variants and Measures
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#initiating-the-client">
    Initiating the Client
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-ask-concept">
    The Ask Concept
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#defining-hooks">
    Defining Hooks
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#submitting-a-request">
    Submitting a Request
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-example">
    Full Example
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#further-pointers">
    Further Pointers
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#authentication-client">
    Authentication Client
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techread-https-client">
    Techread HTTPS Client
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techread-wss-client">
    Techread WSS Client
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-icon md-content__icon" href="https://github.com/werk24/edit/master/docs/api/techread-client.md" title="Edit this page"></a>
<h1 id="techreadclient">TechreadClient<a class="headerlink" href="#techreadclient" title="Permanent link">¶</a></h1>
<p>The Techread Client is a python-based reference implementation to illustrate the communication with the werk24 API. It is actively maintained and will be the lead-implementation for all our development efforts.</p>
<h2 id="initiating-the-client">Initiating the Client<a class="headerlink" href="#initiating-the-client" title="Permanent link">¶</a></h2>
<p>You can make a new Techread client in two lines of code.</p>
<div class="codehilite"><pre><span></span><code>from werk24 import W24TechreadClient
client = W24TechreadClient.make_from_env()
</code></pre></div>
<p>This will create a new client from the environment variables. The client will look for the credentials in the <code>.werk24</code> file in your working directory. If the file cannot be found, the Client falls back to the information it can obtain from the <code>ENVIRONMENT VARIABLES</code> .</p>
<h2 id="the-ask-concept">The Ask Concept<a class="headerlink" href="#the-ask-concept" title="Permanent link">¶</a></h2>
<p>We understand that the individual use-cases can vary largely. Take these two extremes:</p>
<ol>
<li>Application 1 runs a batch job to obtain thumbnails of the main sectional on a Technical Drawing.</li>
<li>Application 2 wants to derive the minimal tolerances on an A0 Technical drawing to inform the live-pricing engine. The user remains online and wants to be entertained while she is waiting for the price assessment.</li>
</ol>
<p>To serve both applications with the same API, we have introduced the concept "Ask", which allows you to define very precicely what you want to learn about the Technical Drawing. Each "Ask" then triggers a response as soon as the information becomes available.</p>
<p>To come back to our application:</p>
<ol>
<li>
<p>Applciation 1 would submit only one Ask:</p>
<ul>
<li>W24AskSectionalThumbnail()</li>
</ul>
</li>
<li>
<p>Application 2 would submit multiple Asks</p>
<ul>
<li>W24AskSheetThumbnail() -- gives the user an overview over the complete sheet</li>
<li>W24AskSectionalThumbail() -- shows to the user that the individual sectionals have been separated correctly</li>
<li>W24AskVariantMeasures() -- delivers the complete information about the Measures (incl. tolerances)</li>
</ul>
</li>
</ol>
<p>See <a href="/docs/api/asks">API/Asks</a> for details.</p>
<h2 id="defining-hooks">Defining Hooks<a class="headerlink" href="#defining-hooks" title="Permanent link">¶</a></h2>
<p>To make your life as developer as easy as possible, we introduced a small <code>Hook</code> object that allows you to define</p>
<ol>
<li>The Ask, and</li>
<li>What function should be called when the Ask is answered</li>
</ol>
<p>The defintion is very simple:</p>
<div class="codehilite"><pre><span></span><code>from werk24 import Hook,W24AskVariantMeasures
hooks = [Hook(ask=W24AskVariantMeasures(), function=print)]
</code></pre></div>
<p>For a full list of available asks, refer to <a href="/docs/api/asks">API/Asks</a></p>
<h2 id="submitting-a-request">Submitting a Request<a class="headerlink" href="#submitting-a-request" title="Permanent link">¶</a></h2>
<p>Submitting a request requires you to start a session and submit both, a Technical Drawing (as bytes) and a list of hooks</p>
<div class="codehilite"><pre><span></span><code>drawing_path = ...
drawing_bytes = open(drawing_path, "rb").read()

async with client as session
    session.read_drawing_with_hooks(
        drawing_bytes,
        hooks)
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Be sure to call the sniplet asyncinously (see Full Example)</p>
</div>
<h2 id="full-example">Full Example<a class="headerlink" href="#full-example" title="Permanent link">¶</a></h2>
<p>Combining all parts from above, we arrive at the full example. When you call the script with the path to a Technical Drawing as first argument, you should shortly after see the measures that were detected on the
Drawing. Be aware that the API will return a response for each sectional that was found on the Canvas.
If your Document contains 2 Pages with 2 Sectionals each, you will receive 4 responses.</p>
<div class="codehilite"><pre><span></span><code>import asyncio
import sys
from dotenv import load_dotenv
from werk24 import W24TechreadClient, W24AskVariantMeasures, Hook

load_dotenv('.werk24')

async def main(drawing_path:str) -&gt; None:

    # define the hooks
    hooks = [Hook(ask=W24AskVariantMeasures(), function=print)]

    # make the session and start the reading process
    client = W24TechreadClient.make_from_env()
    async with client as session:
        await session.read_drawing_with_hooks(drawing_bytes, hooks)

if __name__ == "__main__":
    try:
        drawing_path = sys.argv[1]

        # get the drawing
        with open(drawing_path, "rb") as drawing_handle:
            drawing_bytes = drawing_handle.read()
    except FileNotFoundError:
        sys.exit("File not found")

    except KeyError:
        sys.exit("Drawing Path Required as first argument")

asyncio.run(main(drawing_path))
</code></pre></div>
<h2 id="further-pointers">Further Pointers<a class="headerlink" href="#further-pointers" title="Permanent link">¶</a></h2>
<p>In case you plan to implement your own client, have a look at the structure of the Python client.
It has three "Sublclients" that deal with the different kind of endpoints.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Please talk to us before you start implementing a client in a different language. We are happy to perform peer reviews and would love to make the client available to other customers.</p>
</div>
<h3 id="authentication-client">Authentication Client<a class="headerlink" href="#authentication-client" title="Permanent link">¶</a></h3>
<p>The Authentication Client allows you to obtain a JWT Token from AWS Cognito (see <a href="/docs/basics/authentication">Basics/Authentication</a>). This Token needs to be added to each HTTPS and WSS request as <code>Authorization: Bearer ...</code> .
Obtaining the Token is straight-foward, mainly because frameworks for many languages exist. See <a href="https://github.com/werk24/werk24/blob/master/werk24/auth_client.py">Github/werk24/werk24-python/auth_client.py</a> for a python-based reference implementation.</p>
<h3 id="techread-https-client">Techread HTTPS Client<a class="headerlink" href="#techread-https-client" title="Permanent link">¶</a></h3>
<p>The Techread HTTPS Client is used to</p>
<ol>
<li>Upload Technical Drawings</li>
<li>Upload Models</li>
<li>Download binary Ask Responses</li>
</ol>
<h3 id="techread-wss-client">Techread WSS Client<a class="headerlink" href="#techread-wss-client" title="Permanent link">¶</a></h3>
<p>The Techread WSS Client is used to:</p>
<ol>
<li>Initiate a Request</li>
<li>Listen to Responses in "near-real-time"</li>
</ol>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../basics/" rel="prev" title="Getting Started">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Getting Started
              </span>
</div>
</a>
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../../asks/basics/" rel="next" title="Basics">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Basics
              </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 Werk24
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" rel="noopener" target="_blank">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/application.c33a9706.js"></script>
<script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
<script src="../../assets/javascripts/lunr/lunr.de.js"></script>
<script src="../../assets/javascripts/lunr/lunr.multi.js"></script>
<script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
<script src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.core.js"></script>
<script src="https://wpcc.io/lib/1.0.2/cookieconsent.min.js"></script>
<script src="../../gdpr.js"></script>
</body>
</html>